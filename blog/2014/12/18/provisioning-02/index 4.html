
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°äº‹å§‹ã‚ (2) Vagrantç·¨ - ä¿ºã®Moleskin.log</title>
  <meta name="author" content="å±±æœ¬ è¡">

  
  <meta name="description" content="Vagrantã¯ã€VirtualBoxãªã©ã®ä»®æƒ³åŒ–ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã§ã™ã€‚ãƒ•ãƒªãƒ¼ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹æ§˜ã€…ãªã‚²ã‚¹ãƒˆOSã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã§ãã€ç…©ã‚ã—ã„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã«æ™‚é–“ã‚’å–ã‚‰ã‚Œã‚‹ã“ã¨ãªãã€ç´ æ—©ãç°¡å˜ã«é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚ ã¾ãšã¯ã€Vagrantã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‹ã‚‰å§‹ã‚ã€Guest &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://satoshiyamamoto.github.io/blog/2014/12/18/provisioning-02">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="ä¿ºã®Moleskin.log" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">ä¿ºã®Moleskin.log</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:satoshiyamamoto.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°äº‹å§‹ã‚ (2) Vagrantç·¨</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-18T10:49:04+09:00" pubdate data-updated="true">Dec 18<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Vagrantã¯ã€VirtualBoxãªã©ã®ä»®æƒ³åŒ–ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã§ã™ã€‚ãƒ•ãƒªãƒ¼ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹æ§˜ã€…ãªã‚²ã‚¹ãƒˆOSã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã§ãã€ç…©ã‚ã—ã„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã«æ™‚é–“ã‚’å–ã‚‰ã‚Œã‚‹ã“ã¨ãªãã€ç´ æ—©ãç°¡å˜ã«é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚</p>

<p>ã¾ãšã¯ã€Vagrantã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‹ã‚‰å§‹ã‚ã€Guest OSã®åŸºæœ¬çš„ãªè¨­å®šã¨ã€ã•ã‚‰ã«ã¯ç°¡å˜ãªãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã“ã‚ã¾ã§ã‚’è¨˜ã—ã¦ã„ãã¾ã™ã€‚(VirtualBoxã¯æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¾ã™)</p>

<h2>å‹•ä½œç’°å¢ƒ</h2>

<ul>
<li>Mac OS X 10.8.5</li>
<li>Vagrant 1.7.2</li>
<li>VirtualBox 4.3.20</li>
<li>Opscode Bento</li>
</ul>


<h2>Vagrantã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>

<p><a href="https://github.com/caskroom/homebrew-cask">Homebrew-cask</a>ã‚’ä½¿ã£ã¦ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰Vagrantã®dmgãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å–å¾—ã—ã¾ã™ã€‚ã¾ãšã€å…ˆã«<code>Homebrew-cask</code>ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚<code>brew</code>ã‚³ãƒãƒ³ãƒ‰ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>brew install caskroom/cask/brew-cask
</span><span class='line'><span class="o">==</span>&gt; Installing brew-cask from caskroom/homebrew-cask
</span><span class='line'><span class="o">==</span>&gt; Cloning https://github.com/caskroom/homebrew-cask.git
</span><span class='line'>Updating /Library/Caches/Homebrew/brew-cask--git
</span><span class='line'><span class="o">==</span>&gt; Checking out tag v0.53.3
</span><span class='line'>ğŸº  /usr/local/Cellar/brew-cask/0.53.3: 2421 files, 9.5M, built in 75 seconds
</span></code></pre></td></tr></table></div></figure>


<p>ç¶šã„ã¦<code>vagrant</code>ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>9<span class="nv">$ </span>brew cask install <span class="nv">vagrant</span>
</span><span class='line'><span class="o">==</span>&gt; Downloading https://dl.bintray.com/mitchellh/vagrant/vagrant_1.7.2.dmg
</span><span class='line'>Already downloaded: /Library/Caches/Homebrew/vagrant-1.7.2.dmg
</span><span class='line'><span class="o">==</span>&gt; Running installer <span class="k">for </span>vagrant; your password may be necessary.
</span><span class='line'><span class="o">==</span>&gt; Package installers may write to any location; options such as --appdir are ignored.
</span><span class='line'><span class="o">==</span>&gt; installer: Package name is <span class="nv">Vagrant</span>
</span><span class='line'><span class="o">==</span>&gt; installer: Upgrading at base path /
</span><span class='line'><span class="o">==</span>&gt; installer: The upgrade was successful.
</span><span class='line'>ğŸº  vagrant staged at <span class="s1">&#39;/opt/homebrew-cask/Caskroom/vagrant/1.7.2&#39;</span> <span class="o">(</span>6 files, 79M<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã™ã‚‹ã¨<code>vagrant</code>ã‚³ãƒãƒ³ãƒ‰æœ¬ä½“ã¨å®Ÿè¡Œã«å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚<code>vagrant</code>ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥å‰RubyGemsã§é…å¸ƒã•ã‚Œã¦ã„ãŸã‚ˆã†ã§ã™ãŒã€ä¾å­˜é–¢ä¿‚ã®å•é¡Œã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã€å®Ÿè¡Œæ™‚ã«åŒæ¢±ã•ã‚ŒãŸRubyãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>

<h2>ã‚²ã‚¹ãƒˆOSã®ç®¡ç†</h2>

<p>Vagrantã§ã¯ã€ã‚²ã‚¹ãƒˆOSã®ã“ã¨ã‚’Boxã¨å‘¼ã³ã¾ã™ã€‚Vagrantã®Boxã¯ãƒ•ãƒªãƒ¼ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚‚å¤šãç›®çš„ã«ã‚ˆã£ã¦é©å®œé¸ã¶ã¨è‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p>

<ul>
<li>Bento (Opscode): <a href="https://github.com/opscode/bento">https://github.com/opscode/bento</a></li>
<li>Vagrantbox.es: <a href="http://www.vagrantbox.es">http://www.vagrantbox.es</a></li>
</ul>


<p>boxã¯vagrantã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã¨ãªã£ã¦ã„ã¦ä¸‹è¨˜ã®æ›¸å¼ã§åˆ©ç”¨ã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant box
</span><span class='line'>Usage: vagrant box &lt;subcommand&gt; <span class="o">[</span>&lt;args&gt;<span class="o">]</span>
</span><span class='line'>
</span><span class='line'>Available subcommands:
</span><span class='line'>     add
</span><span class='line'>     list
</span><span class='line'>     outdated
</span><span class='line'>     remove
</span><span class='line'>     repackage
</span><span class='line'>     update
</span><span class='line'>
</span><span class='line'>For <span class="nb">help </span>on any individual subcommand run <span class="sb">`</span>vagrant box &lt;subcommand&gt; -h<span class="sb">`</span>
</span></code></pre></td></tr></table></div></figure>


<p>æ–°ãŸã«Boxã‚’è¿½åŠ ã™ã‚‹ã«ã¯<code>vagrant box add</code>ã®å¾Œã«Boxåã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã®URLã‚’æŒ‡å®šã—ã¾ã™ã€‚ä¾‹ãˆã°Opscodeã®CentOS 7.0ã‚’è¿½åŠ ã™ã‚‹ã«ã¯æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant box add opscode-centos-7.0 http://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_centos-7.0_chef-provisionerless.box
</span></code></pre></td></tr></table></div></figure>


<p><code>vagrant box list</code>ã‚³ãƒãƒ³ãƒ‰ã§Boxã®ä¸€è¦§ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant box list
</span><span class='line'>opscode-centos-6.6   <span class="o">(</span>virtualbox, 0<span class="o">)</span>
</span><span class='line'>opscode-centos-7.0   <span class="o">(</span>virtualbox, 0<span class="o">)</span>
</span><span class='line'>opscode-ubuntu-14.04 <span class="o">(</span>virtualbox, 0<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Pluginã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>

<p>Pluginã‚’åˆ©ç”¨ã™ã‚Œã°Vagrantã®æ©Ÿèƒ½ã‚’å¤§ããæ‹¡å¼µã§ãã¾ã™ã€‚Pluginã‚‚vagrantã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã«ãªã£ã¦ãŠã‚Šæ¬¡ã®æ›¸å¼ã§å‘¼ã³å‡ºã›ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant plugin -h
</span><span class='line'>Usage: vagrant plugin &lt;<span class="nb">command</span>&gt; <span class="o">[</span>&lt;args&gt;<span class="o">]</span>
</span><span class='line'>
</span><span class='line'>Available subcommands:
</span><span class='line'>     install
</span><span class='line'>     license
</span><span class='line'>     list
</span><span class='line'>     uninstall
</span><span class='line'>     update
</span><span class='line'>
</span><span class='line'>For <span class="nb">help </span>on any individual <span class="nb">command </span>run <span class="sb">`</span>vagrant plugin COMMAND -h<span class="sb">`</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä»Šå›ã¯ä»®æƒ³ãƒã‚·ãƒ³ã®çŠ¶æ…‹ã‚’ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å¯èƒ½ã«ã™ã‚‹å¿…é ˆã®<code>sahara</code>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant plugin install sahara
</span></code></pre></td></tr></table></div></figure>


<h2>åŸºæœ¬è¨­å®š</h2>

<h3>ä»®æƒ³ãƒã‚·ãƒ³ã®åˆæœŸåŒ–</h3>

<p>ä»®æƒ³ãƒã‚·ãƒ³ã‚’åˆæœŸåŒ–ã™ã‚‹ã«ã¯<code>vagrant init &lt;box name&gt;</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant init opscode-centos-7.0
</span><span class='line'>A <span class="sb">`</span>Vagrantfile<span class="sb">`</span> has been placed in this directory. You are now
</span><span class='line'>ready to <span class="sb">`</span>vagrant up<span class="sb">`</span> your first virtual environment! Please <span class="nb">read</span>
</span><span class='line'>the comments in the Vagrantfile as well as documentation on
</span><span class='line'><span class="sb">`</span>vagrantup.com<span class="sb">`</span> <span class="k">for </span>more information on using Vagrant.
</span></code></pre></td></tr></table></div></figure>


<p> <code>init</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«<code>Vagrantfile</code>ãŒä½œæˆã•ã‚Œã¾ã™ã€‚</p>

<p> <code>Vagrantfile</code>ã¯è¨€ã‚ã°ä»®æƒ³ãƒã‚·ãƒ³ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚Vagrantã¯ä»®æƒ³ãƒã‚·ãƒ³ã‚’ç«‹ã¡ä¸Šã’ã‚‹éš›ã«ã€ã“ã®<code>Vagrantfile</code>ã®å†…å®¹ã«å¾“ã£ã¦ãƒã‚·ãƒ³ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚</p>

<h3>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è¨­å®š</h3>

<p>ä»®æƒ³ãƒã‚·ãƒ³ã«NATã€ã¾ãŸã¯ãƒ–ãƒªãƒƒã‚¸ã‚’ä½¿ã£ã¦æ¥ç¶šã—ãŸã„å ´åˆã€<code>Vagrantfile</code>ã‚’ç·¨é›†ã—ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è¨­å®šã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚</p>

<p>NATã§ãƒ›ã‚¹ãƒˆã‹ã‚‰ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹ã•ã›ã‚‹ã«ã¯ã€ä¸‹è¨˜ã®ã‚ˆã†ã«<code>private_network</code>ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚ã“ã‚Œã§ãƒ›ã‚¹ãƒˆOSã‹ã‚‰ä»®æƒ³ãƒã‚·ãƒ³ã«ã¯<code>192.168.33.10</code>ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>config.vm.network <span class="s2">&quot;private_network&quot;</span>, ip: <span class="s2">&quot;192.168.33.10&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ãƒ–ãƒªãƒƒã‚¸æ¥ç¶šã§LANã«å‚åŠ ã•ã›ã‚‹ã«ã¯ã€<code>public_network</code>ã®è¨­å®šã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§DHCPæ¥ç¶šã€å›ºå®šIPã‚’å‰²ã‚Šå½“ã¦ã‚‹å ´åˆã¯ã€<code>ip: "&lt;ipv4&gt;"</code>ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># dhcp</span>
</span><span class='line'>config.vm.network <span class="s2">&quot;public_network&quot;</span>
</span><span class='line'><span class="c"># static</span>
</span><span class='line'>config.vm.network <span class="s2">&quot;public_network&quot;</span>, ip: <span class="s2">&quot;192.168.0.17&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>ãƒ›ã‚¹ãƒˆåã®è¨­å®š</h3>

<p>ãƒ›ã‚¹ãƒˆåã¯ã€<code>Vagrantfile</code>ã§æ¬¡ã®ã‚ˆã†ã«æŒ‡å®šã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>config.vm.hostname <span class="o">=</span> <span class="s2">&quot;www.example.com&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>ä»®æƒ³ãƒã‚·ãƒ³ã®èµ·å‹•</h3>

<p>ä»®æƒ³ãƒã‚·ãƒ³ã‚’èµ·å‹•ã™ã‚‹ã«ã¯<code>vagrant up</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å‘¼ã¶ã ã‘ã§ã™ã€‚ä»®æƒ³ãƒã‚·ãƒ³ã®åˆå›èµ·å‹•æ™‚ã«é™ã‚Šã€å¾Œè¿°ã™ã‚‹<code>provision</code>ãŒã‚¿ã‚¹ã‚¯ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant up
</span><span class='line'>Bringing machine <span class="s1">&#39;default&#39;</span> up with <span class="s1">&#39;virtualbox&#39;</span> provider...
</span><span class='line'><span class="o">==</span>&gt; default: Importing base box <span class="s1">&#39;opscode-centos-7.0&#39;</span>...
</span><span class='line'><span class="o">==</span>&gt; default: Matching MAC address <span class="k">for </span>NAT networking...
</span><span class='line'><span class="o">==</span>&gt; default: Setting the name of the VM: fuelphp_default_1423639951154_30886
</span><span class='line'>    :
</span></code></pre></td></tr></table></div></figure>


<p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæˆ»ã£ãŸå¾Œã«ã€<code>vagrant status</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨<code>running</code>ã«ãªã£ã¦ã„ã‚‹ã®ãŒç¢ºèªã§ãã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant status
</span><span class='line'>Current machine states:
</span><span class='line'>
</span><span class='line'>default                   running <span class="o">(</span>virtualbox<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>SSHã«ã‚ˆã‚‹ãƒ­ã‚°ã‚¤ãƒ³</h3>

<p>ä»®æƒ³ãƒã‚·ãƒ³ã«ã¯ã€<code>vagrant ssh</code>ã‚³ãƒãƒ³ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã¾ã™ã€‚ã¾ãŸã€ä»®æƒ³ãƒã‚·ãƒ³ã®SSHãƒãƒ¼ãƒˆã¯ãƒ›ã‚¹ãƒˆã®<code>2222</code>ãƒãƒ¼ãƒˆã«ãƒãƒƒãƒ”ãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€é€šå¸¸ã®<code>ssh</code>ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚ãƒ­ã‚°ã‚¤ãƒ³ã§ãã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant ssh
</span><span class='line'>    or
</span><span class='line'><span class="nv">$ </span>ssh -p 2222 vagrant@localhost <span class="c"># password: vagrant</span>
</span></code></pre></td></tr></table></div></figure>


<h2>é«˜åº¦ãªè¨­å®š</h2>

<p>Vagrantã§ã¯ã€<code>provision</code>ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦<code>Vagrantfile</code>ã«è¨˜è¼‰ã•ã‚ŒãŸShellã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„Chefã®ãƒ¬ã‚·ãƒ”ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€Shellã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚«ãƒ¼ãƒãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®šã‚’å¤‰æ›´ã—ãŸã‚Šã€<code>Chef</code>ã§æ§‹æˆç®¡ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p>

<h3>Shellã«ã‚ˆã‚‹ç°¡å˜ãªãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°</h3>

<p>Shellã‚¹ã‚¯ãƒªãƒ—ãƒˆã§<code>yum fastestmirror</code>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ä¾‹ã§ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>config.vm.provision <span class="s2">&quot;shell&quot;</span>, inline: <span class="s">&lt;&lt;-SHELL</span>
</span><span class='line'><span class="s">   sudo yum clean all</span>
</span><span class='line'><span class="s">SHELL</span>
</span></code></pre></td></tr></table></div></figure>


<p> <code>vagrant provision</code>ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã§ãã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant <span class="nv">provision</span>
</span><span class='line'><span class="o">==</span>&gt; default: Running provisioner: shell...
</span><span class='line'>    default: Running: inline <span class="nv">script</span>
</span><span class='line'><span class="o">==</span>&gt; default: Loaded plugins: fastestmirror
</span><span class='line'>     :
</span></code></pre></td></tr></table></div></figure>


<h3>Chef Zeroã«ã‚ˆã‚‹ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°</h3>

<p>Chefã¨ãƒ­ãƒ¼ã‚«ãƒ«ãƒ¢ãƒ¼ãƒ‰ã®Zeroã«ã¤ã„ã¦ã¯åˆ¥ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã§å–ã‚Šä¸Šã’ã‚‹ã¨ã—ã¦ã€ä»Šå›ã¯ç°¡å˜ã«<code>provision</code>ã§Chef Zeroã‚’å®Ÿè¡Œã™ã‚‹ä¾‹ã‚’è¿°ã¹ã¾ã™ã€‚DSLã®è©³ç´°ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€Vagrantã®<a href="https://docs.vagrantup.com/v2/provisioning/chef_zero.html">ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ</a>ã§ç¢ºèªã§ãã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>config.vm.provision <span class="s2">&quot;chef_zero&quot;</span> <span class="k">do</span> |chef|
</span><span class='line'>  chef.cookbooks_path <span class="o">=</span> <span class="s2">&quot;berks-cookbooks&quot;</span>
</span><span class='line'>  chef.run_list <span class="o">=</span> <span class="s2">&quot;recipe[roles::node.erver]&quot;</span>
</span><span class='line'>end
</span></code></pre></td></tr></table></div></figure>


<p>å…ˆã»ã©ã¨åŒæ§˜ã«<code>vagrant provision</code>ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã—ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant <span class="nv">provision</span>
</span><span class='line'><span class="o">==</span>&gt; default: Running provisioner: chef_zero...
</span><span class='line'><span class="o">==</span>&gt; default: Detected Chef <span class="o">(</span>latest<span class="o">)</span> is already installed
</span><span class='line'>Generating chef JSON and uploading...
</span><span class='line'><span class="o">==</span>&gt; default: Running chef-zero...
</span></code></pre></td></tr></table></div></figure>


<h3>è¤‡æ•°VMã‚’ç«‹ã¡ä¸Šã’ã‚‹</h3>

<p>Vagrantã§ã‚²ã‚¹ãƒˆVMã‚’è¤‡æ•°ç«‹ã¡ä¸Šã’ã‚‹ã«ã¯<code>config.vm.define</code>ã§å®šç¾©ã—ã¾ã™ã€‚VMã®èµ·å‹•ã¯ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ã«å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ä½ã‚¹ãƒšãƒƒã‚¯ãƒã‚·ãƒ³ã®å ´åˆã€èµ·å‹•ãŒçµ‚ã‚ã‚‹ã¾ã§å¤šå°‘æ™‚é–“æ›ã‹ã‚Šã¾ã™ã€‚ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒç™ºç”Ÿã™ã‚‹å ´åˆã¯ã€<code>config.vm.boot_timeout</code>ã®ç§’æ•°ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®300ç§’ã‚ˆã‚Šé•·ãã™ã‚‹ã¨ã‚ˆã„ã§ã—ã‚‡ã†ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>config.vm.define <span class="s2">&quot;node01&quot;</span> <span class="k">do</span> |node|
</span><span class='line'>  node.vm.hostname <span class="o">=</span> <span class="s2">&quot;node01.example.com&quot;</span>
</span><span class='line'>  node.vm.network <span class="s2">&quot;private_network&quot;</span>, ip: <span class="s2">&quot;192.168.33.10&quot;</span>
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>config.vm.define <span class="s2">&quot;node02&quot;</span> <span class="k">do</span> |node|
</span><span class='line'>  node.vm.hostname <span class="o">=</span> <span class="s2">&quot;node02.example.com&quot;</span>
</span><span class='line'>  node.vm.network <span class="s2">&quot;private_network&quot;</span>, ip: <span class="s2">&quot;192.168.33.11&quot;</span>
</span><span class='line'>end
</span></code></pre></td></tr></table></div></figure>


<p>æ¬¡ã¯Chef Zeroã¨Berkshelfã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒæ§‹ç¯‰ã®è‡ªå‹•åŒ–ã«æŒ‘æˆ¦ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<h2>å‚è€ƒ</h2>

<ul>
<li><a href="http://docs.vagrantup.com/v2/vagrantfile/machine_settings.html">config.vm &ndash; Vagrantfile &ndash; Vagrant Documentation</a></li>
<li><a href="http://qiita.com/sho7650/items/cf5a586713f0aec86dc0">Vagrant ã§è¤‡æ•°ã®VM ã‚’ç«‹ã¡ä¸Šã’ã¦ã€ãŠäº’ã„ã«é€šä¿¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ &ndash; Qiita</a></li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">å±±æœ¬ è¡</span></span>

      








  


<time datetime="2014-12-18T10:49:04+09:00" pubdate data-updated="true">Dec 18<span>th</span>, 2014</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://satoshiyamamoto.github.io/blog/2014/12/18/provisioning-02/" data-via="satoshiyamamot" data-counturl="http://satoshiyamamoto.github.io/blog/2014/12/18/provisioning-02/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/12/01/provisioning-01/" title="Previous Post: ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°äº‹å§‹ã‚ (1) rubyç’°å¢ƒæ§‹ç¯‰ç·¨">&laquo; ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°äº‹å§‹ã‚ (1) rubyç’°å¢ƒæ§‹ç¯‰ç·¨</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/01/30/provisioning-03/" title="Next Post: ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°äº‹å§‹ã‚ (3) Chef Zeroç·¨">ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°äº‹å§‹ã‚ (3) Chef Zeroç·¨ &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
	<p>çˆç²ã¨ãƒ‰ãƒ¼ãƒŠãƒ„ã‚’æ„›ã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€‚React/Reduxã¨Node.jsãŒå¥½ã</p>
  <img src="/images/mii.jpg" width="100px" alt="profile photo" />
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/01/24/react-advance/">Reactã¯ã˜ã‚ã¾ã—ãŸ (å¿œç”¨ç·¨)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/01/23/react-basic/">Reactã¯ã˜ã‚ã¾ã—ãŸ (åŸºç¤ç·¨)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/01/30/provisioning-03/">ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°äº‹å§‹ã‚ (3) Chef Zeroç·¨</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/18/provisioning-02/">ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°äº‹å§‹ã‚ (2) Vagrantç·¨</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/01/provisioning-01/">ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°äº‹å§‹ã‚ (1) Rubyç’°å¢ƒæ§‹ç¯‰ç·¨</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/satoshiyamamoto">@satoshiyamamoto</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'satoshiyamamoto',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - å±±æœ¬ è¡ -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
